<template>

</template>

<script type="text/javascript">
  // import axios from 'axios'
  import global_   from  './global'


  /*
  *跳转到登陆页面
  *apptype:模块类型
  * 返回：无
  * */
  const toLogin = function (apptype) {
    console.log('即将调换登陆页面：'+apptype);
    window.location.href=global_.login2_url+"/icdp?apptype="+apptype;
  };
  /*
  *跳转到注销页面
  *apptype:模块类型
  * 返回：无
  * */
  const toLogout = function () {
    // let nexturl = escape(window.location.href);
    let nexturl = escape(global_.icdp_url+':8000/#/');
    console.log('即将跳转注销页面：'+nexturl);
    // console.log('即将跳转注销页面：'+unescape(nexturl));
    window.location.href=global_.login2_url+"/logout?next="+nexturl;
  };
  /*
  *获取当前地址，去掉token参数
  * */
  const getUrl = function () {
    var locationUrl_1 = window.location.href.split('?')[0];

    var urlSearch = window.location.search.substr(1);
    if(urlSearch == null || urlSearch == '' || urlSearch == undefined){
      urlSearch = window.location.href.split('?')[1];
    };
    if(urlSearch == null || urlSearch == '' || urlSearch == undefined){
      console.log('url没有参数:'+window.location.href)
      return window.location.href
    };
    var parStr = urlSearch.split('&');
    for(var i = 0;i<parStr.length;i++){
      var par_str = parStr[i].split('=');
      if (par_str[0] == 'token'){
        par_str[1] = '';
      };
      if(i == 0){
        locationUrl_1 = locationUrl_1+'?'+par_str[0]+'='+par_str[1];
      }else {
        locationUrl_1 = locationUrl_1+'&'+par_str[0]+'='+par_str[1];
      }
    }
    console.log(locationUrl_1)
    return locationUrl_1;
  }
  export default{
    toLogin,
    toLogout,
    getUrl
  }
</script>
